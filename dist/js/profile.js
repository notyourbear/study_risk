function startGame(t){var e="/game/"+t;redirect(e)}function changeText(t,e,s){cleanSpot(t);var i=$("#"+t);i.html(e),s&&i.addClass(s)}function genRadioQ(t){var e={question:t.question,id:t.id,answer:t.answer,falseAnswers:[],lists:[]};t.Lists.forEach(function(t){e.lists.push(t.id)});for(var s=1;5>=s;s++){var i="false"+s;""!==t[i]&&(e.falseAnswers.push(t[i]),e[i]=t[i])}return e}function getCreateListForm(t,e,s){$("#"+t).on("click",function(){cleanSpot(e);var t=$("#"+e),i=$("#newList-template").html();Handlebars.compile(i);t.append(i),s()})}function getListView(t,e){cleanSpot(t);var s=$("#"+t),i=listsObj.lists[e];currentList=e;var o=$("#listView-template").html(),n=Handlebars.compile(o),l=n(i);s.append(l),getQuestionsView("theLists")}function getListsView(t){cleanSpot(t);var e=$("#lists-template").html(),s=Handlebars.compile(e),i=s(listsObj);$("#"+t).append(i),cleanSpot("profileButtons"),addButton("profileButtons","getCreateListForm","button small secondary hollow","Create a new list"),getCreateListForm("getCreateListForm","selectedList",function(){submitNewList("createNewLists")}),changeText("profile-callout","<h2>Your Lists</h2><h3>Select with which list to play</h3>")}function submitNewList(t,e,s){$("#"+t).on("submit",function(t){t.preventDefault();var e=$(this),s={name:$("#newlist-name").val(),description:$("#newlist-desc").val(),"private":e.find("input:checkbox").prop("checked")?!0:!1};$.post("/api/lists",s,function(t){t&&(console.log("yay!",t),listsObj.lists[t.id]=t,getListView("selectedList",t.id))})})}function getLists(t){$.get("/api/lists/user",function(e){t(e)})}function deleteList(t){$.ajax({url:"/api/lists/delete/"+t,type:"DELETE",success:function(e){console.log(e),cleanSpot("selectedList"),changeText("selectedList",'<div style="color: #417365; background: #f5fafa;" class="row"><div class="small-12 columns"> <h1>List has been deleted</h1> </div></div>',"deleted"),delete listsObj.lists[t],getListsView("theLists")}})}function getEditListForm(t,e){cleanSpot(t);var s=$("#"+t),i=$("#listEdit-template").html(),o=Handlebars.compile(i),n=listsObj.lists[e],l=o(n);s.append(l),editList("listEditForm",e)}function editList(t,e){$("#"+t).on("submit",function(t){t.preventDefault();var s={id:e,name:$("#editList-name").val(),description:$("#editList-description").val(),"private":$("#editList-private").prop("checked")?!0:!1};$.ajax({method:"PUT",url:"/api/lists",data:s,success:function(t){console.log("EDITED!",t),listsObj.lists[e]=t,getListView("selectedList",e)}})})}function updateListQuestionTotal(t,e){var s=$("#"+e),i=s.html(),o=i-"";"++"===t?o++:o--,s.html(o)}function getRadios(t){$.get("/api/radios/user",function(e){t(e)})}function submitNewRadio(t,e,s){$("#"+t).on("submit",function(t){t.preventDefault();var e=($(this),{question:$("#newquestion-question").val(),answer:$("#newquestion-answer").val(),false1:$("#newquestion-false1").val()||null,false2:$("#newquestion-false2").val()||null,false3:$("#newquestion-false3").val()||null,false4:$("#newquestion-false4").val()||null,false5:$("#newquestion-false5").val()||null});$.post("/api/radios",e,function(t){if(t){console.log("yay!",t);for(var e={id:t.id,question:t.question,answer:t.answer,lists:[],falseAnswers:[],inCurrentList:!1},s="",i=1;5>=i;i++)s="false"+i,""!==t[s]&&e.falseAnswers.push(t[s]);console.log("newQ",e),radiosObj.question[e.id]=e,addToQuestionList(e.id)}})})}function addToQuestionList(t){var e=$("#createdQuestion-template").html(),s=Handlebars.compile(e),i=s(radiosObj.question[t]);$("#question-"+t).length&&$("#question-"+t).remove(),$("#theLists").append(i)}function getQuestionsView(t){cleanSpot(t);var e=$("#"+t),s=0;for(var i in radiosObj.question)for(console.log(radiosObj.question[i],"q"),radiosObj.question[i].inCurrentList=!1,s=0;s<radiosObj.question[i].lists.length;s++)console.log("currentList",currentList),console.log("list",radiosObj.question[i].lists[s]),radiosObj.question[i].lists[s]===currentList&&(radiosObj.question[i].inCurrentList=!0);console.log(radiosObj);var o=$("#questions-template").html(),n=Handlebars.compile(o),l=n(radiosObj);e.append(l),changeText("profile-callout","<h2>Your Questions</h2><h3>You can add or remove questions from the selected list</h3>"),cleanSpot("profileButtons"),addButton("profileButtons","getListsView","button small hollow secondary","View all Lists"),addButton("profileButtons","getRadioForm","button small hollow secondary","Create a new question"),getCreateRadioForm("getRadioForm","selectedList",function(){submitNewRadio("createNewRadio")}),$("#getListsView").on("click",function(){getListsView("theLists")})}function getCreateRadioForm(t,e,s){$("#"+t).on("click",function(){cleanSpot(e);var t=$("#"+e),i=$("#newRadio-template").html();Handlebars.compile(i);t.append(i),s()})}function addToList(t,e){var s={listId:e,questionId:t};void 0!==e&&$.post("/api/radios/list",s,function(e){console.log("ADDED!",e),$("#question-"+t).find("button.btLeft").remove();var s=$("#listView-questions"),i=$("#addQuestionToList-template").html(),o=Handlebars.compile(i),n=radiosObj.question[t],l=o(n);s.append(l),updateListQuestionTotal("++","listView-amountOfQs")})}function removeQFromList(t,e){var s={listId:e,questionId:t};void 0!==e&&$.post("/api/radios/removefromlist",s,function(e){console.log("removed!",e),$("#listQuestion-"+t).remove();var s="question-"+t+" .button-group";console.log(s),addButton(s,"questionButton-"+t,"button hollow secondary btLeft","Add to list","prepend"),updateListQuestionTotal("--","listView-amountOfQs"),$("#questionButton-"+t).on("click",function(){console.log("GO!"),addToList(t,currentList)})})}function getQuestionView(t,e){cleanSpot(t);var s=$("#"+t),i=$("#questionEdit-template").html(),o=Handlebars.compile(i),n=radiosObj.question[e],l=o(n);s.append(l)}function deleteQuestion(t,e,s){$.ajax({url:"/api/radios/delete/"+t,type:"DELETE",success:function(t){console.log(t),changeText(e,'<div class="small-12 columns"> Question has been deleted</div>',"deleted"),$("#"+s).remove()}})}function getEditQuestionForm(t,e){cleanSpot(t);var s=$("#"+t),i=$("#questionEdit-template").html(),o=Handlebars.compile(i),n=radiosObj.question[e],l=o(n);s.append(l),editQuestion("questionEditForm",e)}function editQuestion(t,e){$("#"+t).on("submit",function(t){t.preventDefault();var s={id:e,question:$("#editQuestion-question").val(),answer:$("#editQuestion-answer").val(),false1:$("#editQuestion-false1").val()||null,false2:$("#editQuestion-false2").val()||null,false3:$("#editQuestion-false3").val()||null,false4:$("#editQuestion-false4").val()||null,false5:$("#editQuestion-false5").val()||null};$.ajax({method:"PUT",url:"/api/radios",data:s,success:function(t){console.log("EDITED!",t),radiosObj.question[t.id]=genRadioQ(t),getQuestionView("selectedList",t.id),addToQuestionList(t.id)}})})}var listsObj={lists:{}},radiosObj={question:{}},currentList;$("document").ready(function(){getLists(function(t){getRadios(function(e){var s={radios:e.radio};t.lsts.forEach(function(t){listsObj.lists[t.id]=t}),s.radios.forEach(function(t){radiosObj.question[t.id]=genRadioQ(t)}),console.log("radios",radiosObj),console.log("listsObj.lists",listsObj),getListsView("theLists")})})}),$("document").ready(function(){$("#logoutButton").on("click",function(){console.log("hey"),$.get("/api/users/logout",function(t){console.log(t),redirect("/")})})});